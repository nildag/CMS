<!--
<!DOCTYPE html>
<html>
<head>
    <title>Lista de Roles</title>
</head>
<body>
    <h1>Lista de Roles</h1>
    <div class="roles-grid">
        {% for rol in roles %}
            <div class="rol">
                <p>{{ rol.nombre }} : {{ rol.descripcion }}</p>

                <form method="post" action="{% url 'rol:borrar_rol' rol.id %}">
                    {% csrf_token %}
                    <button type="submit">Borrar</button>
                </form>

                <form method="post" action="{% url 'rol:modificar_permisos' rol.id %}">
                    {% csrf_token %}
                    <button type="submit">Modificar</button>
                </form>

            </div>
        {% endfor %}
    </div>
</body>
</html>

-->

<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <title>Roles</title>
</head>
<body>

<h1>Roles</h1>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Nombre</th>
      <th scope="col">Descripcion</th>
        <th sope="col">Permisos</th>
    </tr>
  </thead>
   <tbody>

        {% for rol in roles %}
        <tr>
              <td>{{ rol.nombre }}</td>
              <td>{{ rol.descripcion }}</td>
            <td>
                <div class="accordion" id="accordionExample">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#{{ rol.nombre }}"  aria-controls="{{ rol.nombre }}">
                        Permisos
                      </button>
                    </h2>
                </div>

                 <div id="{{ rol.nombre }}" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                    <ul>
                        {% for clave, valor in rol.permisos.items %}
                        <li>{{ clave }} : {{ valor }}}</li>
                        {% endfor %}
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            </td>
        <td>
            <form method="post" action="{% url 'rol:borrar_rol' rol.id %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">Borrar</button>
                </form>
        </td>
        <td>
             <form method="post" action="{% url 'rol:modificar_permisos' rol.id %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-secondary">Modificar</button>
            </form>
        </td>
        </tr>
        {% endfor %}
   </tbody>
</table>
</body>
</html>
